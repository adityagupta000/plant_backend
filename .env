# ========================================
# SERVER CONFIGURATION
# ========================================
NODE_ENV=development
PORT=5000
HOST=localhost
FRONTEND_URL=http://localhost:5173


# ========================================
# DATABASE CONFIGURATION
# ========================================
DB_DIALECT=sqlite
DB_PATH=./database.sqlite
DB_LOGGING=false


# ========================================
# JWT CONFIGURATION (DUAL TOKEN SYSTEM)
# IMPORTANT:
# Generate secrets using:
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# ========================================

# Access Token (Short-lived)
ACCESS_TOKEN_SECRET=S5baR/7SdB6smZt3ojd8xvY+4q27H4+jFJ1KKBX5hs8=
ACCESS_TOKEN_EXPIRE=15m

# Refresh Token (Long-lived) â€“ MUST be different
REFRESH_TOKEN_SECRET=1MRKKE6dkDNH33YxSger7hPhwLzlkbhk4PO5PxHQhyc=
REFRESH_TOKEN_EXPIRE=7d
REFRESH_TOKEN_COOKIE_NAME=refreshToken


# ========================================
# COOKIE CONFIGURATION
# ========================================
COOKIE_SECURE=false          # true in production (HTTPS)
COOKIE_SAME_SITE=strict
COOKIE_HTTP_ONLY=true


# ========================================
# AI SERVICE CONFIGURATION
# ========================================
AI_SERVICE_TIMEOUT=30000
AI_SERVICE_MAX_RETRIES=3
AI_SERVICE_RETRY_DELAY=1000


# ========================================
# FILE UPLOAD CONFIGURATION
# ========================================
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg
ALLOWED_EXTENSIONS=jpg,jpeg,png


# ========================================
# RATE LIMITING
# ========================================
# Prediction
PREDICTION_RATE_WINDOW_MS=900000
PREDICTION_RATE_MAX=50

# Auth
AUTH_RATE_WINDOW_MS=900000
AUTH_RATE_MAX=10


# ========================================
# STORAGE CONFIGURATION
# ========================================
STORAGE_TYPE=local
TEMP_FILE_CLEANUP=true
CLEANUP_DELAY_MS=5000


# ========================================
# LOGGING
# ========================================
LOG_LEVEL=info
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7


# ========================================
# SECURITY
# ========================================
BCRYPT_ROUNDS=10
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MS=900000


# ========================================
# MODEL METADATA (NOT PATHS)
# ========================================
MODEL_NAME=efficientnet_b2
MODEL_VERSION=v1.0.0
MODEL_INPUT_SIZE=224
MODEL_CLASSES=Healthy,Pest_Fungal,Pest_Bacterial,Pest_Insect,Nutrient_Nitrogen,Nutrient_Potassium,Water_Stress

# ========================================
# AI SERVICE CONFIGURATION
# ========================================
PYTHON_PATH=./ai/venv/Scripts/python.exe
MODEL_PATH=./ai/saved_models/best_model.pth
AI_SERVICE_TIMEOUT=30000
AI_SERVICE_MAX_RETRIES=3
AI_SERVICE_RETRY_DELAY=1000